import{c as C,_ as w,E as y,S as E,a as O,O as f,e as b,b as I,j as a,r as p,C as L,A as N,u as P,B as v,d as A}from"./index-Drcf1Kml.js";var R=C(function(o){return function(){o(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),d=function(o){w(s,o);function s(){var e=o.call(this)||this;return e.closed=!1,e.currentObservers=null,e.observers=[],e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return s.prototype.lift=function(e){var t=new m(this,this);return t.operator=e,t},s.prototype._throwIfClosed=function(){if(this.closed)throw new R},s.prototype.next=function(e){var t=this;b(function(){var r,i;if(t._throwIfClosed(),!t.isStopped){t.currentObservers||(t.currentObservers=Array.from(t.observers));try{for(var n=I(t.currentObservers),u=n.next();!u.done;u=n.next()){var l=u.value;l.next(e)}}catch(h){r={error:h}}finally{try{u&&!u.done&&(i=n.return)&&i.call(n)}finally{if(r)throw r.error}}}})},s.prototype.error=function(e){var t=this;b(function(){if(t._throwIfClosed(),!t.isStopped){t.hasError=t.isStopped=!0,t.thrownError=e;for(var r=t.observers;r.length;)r.shift().error(e)}})},s.prototype.complete=function(){var e=this;b(function(){if(e._throwIfClosed(),!e.isStopped){e.isStopped=!0;for(var t=e.observers;t.length;)t.shift().complete()}})},s.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(s.prototype,"observed",{get:function(){var e;return((e=this.observers)===null||e===void 0?void 0:e.length)>0},enumerable:!1,configurable:!0}),s.prototype._trySubscribe=function(e){return this._throwIfClosed(),o.prototype._trySubscribe.call(this,e)},s.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},s.prototype._innerSubscribe=function(e){var t=this,r=this,i=r.hasError,n=r.isStopped,u=r.observers;return i||n?y:(this.currentObservers=null,u.push(e),new E(function(){t.currentObservers=null,O(u,e)}))},s.prototype._checkFinalizedStatuses=function(e){var t=this,r=t.hasError,i=t.thrownError,n=t.isStopped;r?e.error(i):n&&e.complete()},s.prototype.asObservable=function(){var e=new f;return e.source=this,e},s.create=function(e,t){return new m(e,t)},s}(f),m=function(o){w(s,o);function s(e,t){var r=o.call(this)||this;return r.destination=e,r.source=t,r}return s.prototype.next=function(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)},s.prototype.error=function(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)},s.prototype.complete=function(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)},s.prototype._subscribe=function(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:y},s}(d);const g=({label:o,id:s,type:e,placeholder:t,value:r,onChange:i,required:n})=>a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{htmlFor:s,className:"block text-sm font-medium text-gray-700",children:o}),a.jsx("input",{type:e,id:s,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:t,value:r,onChange:i,required:n})]}),U=({type:o,children:s,onClick:e})=>a.jsx("button",{type:o,className:"w-full p-2 mt-4 text-white bg-blue-500 rounded-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 duration-300",onClick:e,children:s}),k=({username:o,password:s,onLoginChange:e,onPasswordChange:t,onSubmit:r})=>a.jsx("article",{className:"flex justify-center gap-5 pt-20 min-h-screen bg-gradient-to-r from-orange-500 to-yellow-500",children:a.jsxs("form",{onSubmit:r,className:"flex gap-2 flex-col w-80",children:[a.jsx(g,{label:"Login",id:"login",type:"text",placeholder:"Login",value:o,onChange:e,required:!0}),a.jsx(g,{label:"Password",id:"password",type:"password",placeholder:"Password",value:s,onChange:t,required:!0}),a.jsx(U,{type:"submit",children:"Login"})]})}),F=()=>{const o=p.useContext(L);if(o)return o.get(N)},z=()=>{const[o,s]=p.useState(""),[e,t]=p.useState(""),r=P(),i=F(),n=new d,u=new d,l=new d;p.useEffect(()=>{const c=n.pipe().subscribe(s),_=u.pipe().subscribe(t),j=l.subscribe(async()=>{i&&(await i.login(o,e)?(v.success("Login successful"),r({to:"/"})):v.error("Invalid login or password"),t(""),s(""))});return()=>{c.unsubscribe(),_.unsubscribe(),j.unsubscribe()}},[o,e,i,r]);const h=c=>{n.next(c.target.value)},S=c=>{u.next(c.target.value)},x=c=>{c.preventDefault(),l.next()};return a.jsx(k,{username:o,password:e,onLoginChange:h,onPasswordChange:S,onSubmit:x})},q=A("/login")({component:z});export{q as Route};
